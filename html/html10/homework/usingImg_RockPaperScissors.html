<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>가위바위보</title>
	<script type="text/javascript">
/*
	가위 바위 보 게임을 할 수 있는 프로그램을 작성하시오. 
	(단, 컴퓨터는 랜덤을 이용하고, 사용자는 prompt로 입력받아서 처리)
*/
		function start() {
		
// 			var user = prompt("가위바위보를 입력하세요.");
			
			//while문, 배열.indexOf() 사용해서
			//prompt()에서 원하는 값을 더 정확하게 받기
			var user = "";
			var arr = ["가위", "바위", "보"];
			while(arr.indexOf(user) == -1) {
				user = prompt("가위바위보를 입력하세요.");
				
				//취소(버튼)를 선택한 경우
				if(user == null) {
					return; //function 종료
				}
			}
			
			var com = parseInt(Math.random()*3);
			
// 			var arr = ["가위", "바위", "보"];
			
			var strImg = "../../../images/";
			var arrUserImg = ["ga_left.png", "ba_left.png", "bo_left.png"];
			var arrComImg = ["ga_right.png", "ba_right.png", "bo_right.png"];
			
			var imgBox = document.getElementsByClassName("imgBox")[0]; 
			var userImg = imgBox.children[0];
			var comImg = imgBox.children[1];
						
			var userIdx = arr.indexOf(user);
			
			var result = "";
			
			if(userIdx < 0) {
				result = "입력값 오류";
				return; //이후의 코드를 실행하지 않고 함수 실행을 끝낼 수 있다
			}else {
				if(userIdx == com) {
					result = "무승부";
				}else if(userIdx > com) { //(1,0), (2,1), (2,0)
					if(userIdx == 2 && com == 0) { //(2,0)
						result = "컴퓨터 승!";
					}else {
						result = "사용자 승!";
					}
				}else if(userIdx < com) { //(0,1), (0,2), (1,2)
					if(userIdx == 0 && com == 2) { //(0,2)
						result = "사용자 승!";
					}else {
						result = "컴퓨터 승!";
					}
				}	
			}
			
			userImg.src = strImg;
			switch(userIdx) {
			case 0:
				userImg.src += arrUserImg[userIdx];
				break;
			case 1:
				userImg.src += arrUserImg[userIdx];
				break;
			case 2:
				userImg.src += arrUserImg[userIdx];
				break;
			}
			
			comImg.src = strImg;
			switch(com) {
			case 0:
				comImg.src += arrComImg[com];
				break;
			case 1:
				comImg.src += arrComImg[com];
				break;
			case 2:
				comImg.src += arrComImg[com];
				break;
			}
			
			var div = document.getElementsByTagName("div");
			div[div.length-1].innerHTML = "결과 : " + result;
		}
	</script>
	<style type="text/css">
		* {
			font-size: 22px;
		}
		body {
			margin: 0;
		}
		button {
			width: calc(10%);
			margin: 1vh 45%;
			height: 5vh;
			overflow: auto;
		}
		table {
			text-align: center;			
 			width: 100%;
			height: 7vh;
 			line-height: 7vh;
 			float: left;
		}
		td {
			width: 50%;
		}
		td:first-child {
			background: yellow; 
		}
		td:last-child {
			background: pink;
		}
		img {
			width: calc(50%);
			height: 50vh;
			float: left;
			overflow: auto;
		}
 		div:last-child {
	 		width: 100%;
	 		text-align: center;
			height: 10vh;
 		}
 		.imgBox {
	 		width: 100%;
 			height: 50vh;
 		}
	</style>
</head>
<body>
	<button type="button" onclick="start();">게임 시작</button>
	<table>
		<tr>
			<td>사용자</td>
			<td>컴퓨터</td>
		</tr>
	</table>
	<div class="imgBox">
		<img src="../../../images/ba_left.png" alt="가위바위보 사용자 사진">
		<img src="../../../images/ba_right.png" alt="가위바위보 컴퓨터 사진">
	</div>
	<div></div>
</body>
</html>